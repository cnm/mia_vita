
Makefile,130
CC= ../crosstool/arm-unknown-linux-gnu/bin/arm-unknown-linux-gnu-gccCC1,0
FLAGS=-Wall -gFLAGS2,69
LIBS=-pthread -lmLIBS3,84

gps_time.c,3074
#define DLE DLE18,248
#define ETX ETX19,265
#define GPS_REQUEST_TIME GPS_REQUEST_TIME21,283
#define GPS_CMD_RESET GPS_CMD_RESET23,314
#define GPS_CMD_AUTOMATIC_POS_REPORT GPS_CMD_AUTOMATIC_POS_REPORT24,341
#define GPS_CMD_ENHANCED_SENSITIVITY GPS_CMD_ENHANCED_SENSITIVITY25,383
#define GPS_MSG_TIME GPS_MSG_TIME27,426
#define GPS_MSG_SW_VERSION GPS_MSG_SW_VERSION28,452
#define GPS_MSG_RECEIVER_HEALTH GPS_MSG_RECEIVER_HEALTH29,484
#define SEC_WEEK SEC_WEEK34,594
#define SEC_GPS_EPOCH SEC_GPS_EPOCH35,618
gps_fault_t gps_fault = GPS_OK;gps_fault37,651
char reset_msg[] = { DLE, GPS_CMD_RESET, DLE, ETX };reset_msg39,684
char disable_auto_report_msg[] = { DLE, GPS_CMD_AUTOMATIC_POS_REPORT, 0, 0,disable_auto_report_msg40,737
char enhance_sensitivity_on_msg[] = { DLE, GPS_CMD_ENHANCED_SENSITIVITY, 1, 0,enhance_sensitivity_on_msg42,829
char enhance_sensitivity_off_msg[] = { DLE, GPS_CMD_ENHANCED_SENSITIVITY, 0, 0,enhance_sensitivity_off_msg44,924
char request_time_msg[] = { DLE, GPS_REQUEST_TIME, DLE, ETX };request_time_msg46,1020
int num_satellites = 0;num_satellites48,1084
#define LHEX(LHEX50,1109
#define HHEX(HHEX51,1136
#define BIT(BIT52,1161
#define GPS_DEBUGGPS_DEBUG55,1227
#define MSG_BUF_SIZE MSG_BUF_SIZE57,1246
unsigned char msg_buf[MSG_BUF_SIZE];msg_buf60,1345
int buff_start = 0, buff_end = 0;buff_start62,1469
int buff_start = 0, buff_end = 0;buff_end62,1469
pthread_mutex_t state_change_m = PTHREAD_MUTEX_INITIALIZER;state_change_m65,1558
pthread_mutex_t gps_write_m = PTHREAD_MUTEX_INITIALIZER;gps_write_m67,1662
pthread_cond_t data_available_cond = PTHREAD_COND_INITIALIZER;data_available_cond70,1784
pthread_cond_t time_available_cond = PTHREAD_COND_INITIALIZER;time_available_cond72,1918
struct timeval *current_time = NULL;current_time75,2015
FILE *debug_f;debug_f77,2053
pthread_t process_msg_t;process_msg_t79,2069
    GPS_PRE_INIT, // before GPS reset, dump all messagesGPS_PRE_INIT82,2110
    GPS_RESET, // after GPS reset, before first post GPS message is receivedGPS_RESET83,2167
    GPS_SEARCH, // GPS is reset. Waiting for GPS signal. Yet unable to provide timeGPS_SEARCH84,2244
    GPS_READY, // was gps signal. Can provide timeGPS_READY85,2328
    GPS_QUERYGPS_QUERY86,2379
} gps_state_t;gps_state_t89,2486
gps_state_t gps_state = GPS_PRE_INIT;gps_state91,2502
void (*gps_write)(char *msg, int msg_len);gps_write93,2541
void* process_msg(void *unused);process_msg94,2584
void packet_content(char *error_msg, int start, int end) {packet_content96,2618
char lookup_packet(int *start, int *end) {lookup_packet120,3389
void init_gps(char indoor, void(*input_for_gps)(char *msg, int msg_len),init_gps187,5073
void output_from_gps(unsigned char* msg, int msg_len) {output_from_gps213,5980
char is_gps_ready() {is_gps_ready241,7033
int getGPStimeUTC(struct timeval *tv) {getGPStimeUTC250,7312
int getgpssatellites() {getgpssatellites279,8202
gps_fault_t getgpsfault() {getgpsfault283,8257
void* process_msg(void *unused) {process_msg287,8310

uart_gps_test.c,46
int main(int argc, char **argv) {main23,400

gps_uartctl.c,601
#define GPS_DEVICE GPS_DEVICE28,455
#define ERROR_BUF_SIZE ERROR_BUF_SIZE29,487
#define GPS_BUF_SIZE GPS_BUF_SIZE30,515
char error_buf[ ERROR_BUF_SIZE];error_buf32,541
unsigned char gps_buf[ GPS_BUF_SIZE];gps_buf33,574
int gps_device_fd;gps_device_fd34,612
FILE *error_f = NULL;error_f35,631
pthread_t read_thread;read_thread36,653
void* uart_read_thread( void *);uart_read_thread38,677
void uart_init( char indoor, FILE *status_output) {uart_init43,809
void uart_write( char *msg, int msg_len) {uart_write61,1497
void* uart_read_thread( void *unused) {uart_read_thread73,1944

gps_time.h,656
#define GPS_TIME_H_GPS_TIME_H_9,98
	GPS_OK,GPS_OK12,134
	GPS_ANTENA_SHORT,GPS_ANTENA_SHORT13,143
	GPS_ANTENA_OPEN,GPS_ANTENA_OPEN14,162
	GPS_NEEDED_RESET,GPS_NEEDED_RESET15,180
	GPS_BATTERY_FAULTGPS_BATTERY_FAULT16,199
} gps_fault_t;gps_fault_t17,218
void init_gps( char indoor, void (*input_for_gps)( char *msg, int msg_len), FILE *output_status_f);init_gps21,268
void output_from_gps( unsigned char* msg, int msg_len);output_from_gps23,369
char is_gps_ready();is_gps_ready28,450
int getGPStimeUTC( struct timeval *tv);getGPStimeUTC30,472
int getgpssatellites();getgpssatellites32,513
gps_fault_t getgpsfault();getgpsfault34,538

gps_uartctl.h,172
#define GPS_UARTCTL_H_GPS_UARTCTL_H_9,104
void uart_init( char indoor, FILE *status_output);uart_init11,128
void uart_write( char *msg, int msg_len);uart_write13,180
